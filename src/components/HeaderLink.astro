---
export interface Props extends astroHTML.JSX.AnchorHTMLAttributes {}

const { href, class: className, ...props } = Astro.props;
const path = Astro.url.pathname.replace(/\/$/, "");

const isHome = href === '/' && path === '';
const isOtherPages = typeof href === "string" && href.length > 1
    ? path.substring(1).startsWith(href.substring(1))
    : false;
const isActive = isHome || isOtherPages

---
<a
  href={href}
  class:list={[
    className,
    'unset nav-link',
    { 'is-active': isActive },
  ]}
  {...props}
><slot /></a>

<style>
  .nav-link {
    position: relative;
    display: inline-block;
    padding-bottom: 0.2rem;
  }

  .nav-link::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: 0;
    width: 100%;
    height: 1.5px;
    background: rgb(var(--color-border-ink));
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.2s ease;
  }

  .nav-link:hover::after,
  .nav-link.is-active::after {
    transform: scaleX(1);
  }
</style>
